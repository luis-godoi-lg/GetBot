<Window x:Class="GestaoChamados.Desktop.ChamadosWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Meus Chamados - ChatBot" Height="700" Width="1400"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        Background="White">
    
    <Window.Resources>
        <!-- Estilo para cabeÃ§alhos da tabela -->
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#333"/>
            <Setter Property="Padding" Value="10,8"/>
        </Style>
        
        <!-- Estilo para cÃ©lulas da tabela -->
        <Style x:Key="CellTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Foreground" Value="#333"/>
            <Setter Property="Padding" Value="10,12"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Estilo para badges de status -->
        <Style x:Key="StatusBadgeStyle" TargetType="Border">
            <Setter Property="CornerRadius" Value="3"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header Azul com Logo -->
        <Border Grid.Row="0" Background="#0066CC" Padding="25,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Image Grid.Column="0"
                       Source="Resources/png_logo_branco.png"
                       Width="150"
                       Height="40"
                       Stretch="Uniform"
                       VerticalAlignment="Center"
                       Margin="0,0,10,0"/>
                
                <TextBlock Grid.Column="1"
                           Text="GetBot"
                           FontSize="22"
                           FontWeight="Bold"
                           Foreground="White"
                           VerticalAlignment="Center"
                           Margin="0,0,0,0"/>

                <!-- BotÃ£o Chamados (ativo quando tÃ©cnico) -->
                <Button Grid.Column="2"
                        x:Name="ChamadosButton" 
                        Content="Chamados" 
                        Padding="12,8"
                        Margin="15,0,0,0"
                        Background="#0052A3" 
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        FontSize="14"/>

                <!-- BotÃ£o Dashboard (apenas TÃ©cnico/Gerente/Admin) -->
                <Button x:Name="DashboardButton" 
                        Content="Dashboard" 
                        Click="DashboardButton_Click"
                        Padding="12,8"
                        Margin="5,0,0,0"
                        Background="Transparent" 
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        FontSize="14"
                        Visibility="Collapsed">
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Background" Value="Transparent"/>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#0052A3"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <StackPanel Grid.Column="4" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,15,0">
                    <TextBlock Text="ðŸ‘¤" FontSize="16" Foreground="White" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBlock x:Name="UserInfoTextBlock" 
                               Text="usuario@email.com" 
                               FontSize="14" 
                               Foreground="White"
                               VerticalAlignment="Center"/>
                </StackPanel>

                <Button Grid.Column="5"
                        x:Name="LogoutButton" 
                        Content="Sair" 
                        Click="LogoutButton_Click"
                        Padding="15,8"
                        Background="#0052A3" 
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        FontSize="13"/>
            </Grid>
        </Border>

        <!-- TÃ­tulo e BotÃ£o -->
        <Border Grid.Row="1" Background="White" Padding="30,25,30,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0"
                           Text="Meus Chamados" 
                           FontSize="28" 
                           FontWeight="Bold" 
                           Foreground="#333"
                           VerticalAlignment="Center"/>

                <Button Grid.Column="1"
                        x:Name="NovoChamadoButton" 
                        Content="Abrir Novo Chamado" 
                        Click="NovoChamadoButton_Click"
                        Padding="20,10" 
                        Background="#0066CC" 
                        Foreground="White"
                        BorderThickness="0"
                        Cursor="Hand"
                        FontSize="14"
                        FontWeight="SemiBold"
                        Visibility="Visible"/>
            </Grid>
        </Border>

        <!-- Tabela de Chamados -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
            <Grid Margin="30,0,30,30">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- CabeÃ§alho da Tabela -->
                <Border Grid.Row="0" 
                        Background="#F8F9FA" 
                        BorderBrush="#DEE2E6" 
                        BorderThickness="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="250"/>
                            <ColumnDefinition Width="140"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="160"/>
                            <ColumnDefinition Width="120"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Column="0" Text="Protocolo" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="1" Text="Assunto" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="2" Text="Status" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="3" Text="Criado Por" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="4" Text="TÃ©cnico ResponsÃ¡vel" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="5" Text="Data de Abertura" Style="{StaticResource HeaderTextStyle}"/>
                        <TextBlock Grid.Column="6" Text="AÃ§Ãµes" Style="{StaticResource HeaderTextStyle}"/>
                    </Grid>
                </Border>

                <!-- Loading Indicator -->
                <TextBlock Grid.Row="1"
                           x:Name="LoadingTextBlock" 
                           Text="â³ Carregando chamados..." 
                           FontSize="16" 
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Margin="0,50,0,0"
                           Visibility="Visible"
                           Foreground="#666"/>

                <!-- Corpo da Tabela -->
                <ItemsControl Grid.Row="1" 
                              x:Name="ChamadosItemsControl" 
                              Visibility="Collapsed">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="#DEE2E6" 
                                    BorderThickness="0,0,1,1"
                                    Background="White">
                                <Border.Style>
                                    <Style TargetType="Border">
                                        <Style.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter Property="Background" Value="#F8F9FA"/>
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </Border.Style>
                                
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="100"/>
                                        <ColumnDefinition Width="250"/>
                                        <ColumnDefinition Width="140"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="160"/>
                                        <ColumnDefinition Width="120"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Protocolo -->
                                    <TextBlock Grid.Column="0" 
                                               Text="{Binding Protocolo}" 
                                               Style="{StaticResource CellTextStyle}"/>

                                    <!-- Assunto -->
                                    <TextBlock Grid.Column="1" 
                                               Text="{Binding Titulo}" 
                                               Style="{StaticResource CellTextStyle}"
                                               TextTrimming="CharacterEllipsis"/>

                                    <!-- Status -->
                                    <Border Grid.Column="2" 
                                            Style="{StaticResource StatusBadgeStyle}"
                                            Background="{Binding StatusColor}"
                                            Margin="10,8">
                                        <TextBlock Text="{Binding StatusTexto}" 
                                                   Foreground="White" 
                                                   FontWeight="SemiBold"
                                                   FontSize="12"
                                                   TextAlignment="Center"/>
                                    </Border>

                                    <!-- Criado Por -->
                                    <TextBlock Grid.Column="3" 
                                               Text="{Binding UsuarioEmail}" 
                                               Style="{StaticResource CellTextStyle}"
                                               TextTrimming="CharacterEllipsis"/>

                                    <!-- TÃ©cnico -->
                                    <TextBlock Grid.Column="4" 
                                               Text="{Binding TecnicoNome}" 
                                               Style="{StaticResource CellTextStyle}"
                                               TextTrimming="CharacterEllipsis"/>

                                    <!-- Data -->
                                    <TextBlock Grid.Column="5" 
                                               Text="{Binding DataCriacaoFormatada}" 
                                               Style="{StaticResource CellTextStyle}"/>

                                    <!-- AÃ§Ãµes -->
                                    <Button Grid.Column="6"
                                            Content="ðŸ‘ Detalhes" 
                                            Tag="{Binding Id}"
                                            Click="VerDetalhesButton_Click"
                                            Padding="10,6" 
                                            Margin="10,8"
                                            Background="#17A2B8" 
                                            Foreground="White"
                                            BorderThickness="0"
                                            Cursor="Hand"
                                            FontSize="12"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <!-- Nenhum Chamado -->
                <TextBlock Grid.Row="1"
                           x:Name="NenhumChamadoTextBlock" 
                           Text="ðŸ“‹ Nenhum chamado encontrado." 
                           FontSize="16" 
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           Margin="0,50,0,0"
                           Foreground="#999"
                           Visibility="Collapsed"/>
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>
